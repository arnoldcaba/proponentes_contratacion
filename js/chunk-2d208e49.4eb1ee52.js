(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208e49"],{a774:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-flex",[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.abrirDialogoAddedit(0,"")}}},[a("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.data,"items-per-page":5,"disable-sort":!0},scopedSlots:e._u([{key:"item.action",fn:function(t){var o=t.item;return[a("v-icon",{staticClass:"mr-5",attrs:{color:"primary"},on:{click:function(t){return e.abrirDialogoAddedit(1,o)}}},[e._v(" edit ")]),a("v-icon",{staticClass:"mr-5",attrs:{color:"error"},on:{click:function(t){e.dialog_del=!0,e.itemactual=o}}},[e._v(" delete ")])]}}])})],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:"",column:""}},[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",[a("v-text-field",{attrs:{label:"Descripción",rules:[e.rules.required]},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.cerrarDialogo}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.saveDocumento}},[e._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog_del,callback:function(t){e.dialog_del=t},expression:"dialog_del"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline red--text"},[e._v("Eliminar Documento")])]),a("v-card-text",[e._v(" ¿Esta seguro de eliminar el actual documento? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_del=!1}}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:e.deleteDoc}},[e._v("Eliminar")])],1)],1)],1)],1)},r=[],i=a("1da1"),n=(a("96cf"),a("7424")),c={name:"tabdoclegalizacontractual",props:["idproceso"],data:function(){return{data:[],dialog:!1,dialog_del:!1,itemactual:"",formTitle:"",edit:-1,valid:!1,codigo:0,tipo:"LC",descripcion:"",headers:[{text:"Documento",align:"left",value:"descripcion",class:"subtitle-1 font-weight-bold black--text"},{text:"Acción",value:"action",sortable:!1,class:"subtitle-1 font-weight-bold black--text"}],rules:{required:function(e){return!!e||"Campo requerido."}}}},methods:{limpiarDatos:function(){this.codigo=0,this.descripcion=""},traeDocumentos:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n["a"].PropuestaConvocatoriaDocumentos({propuestaconvocatoria:e.idproceso,tipo:e.tipo});case 3:a=t.sent,o=a.data,e.data=o,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()},abrirDialogoAddedit:function(e,t){this.edit=e,this.itemactual=t,this.dialog=!0},abrirDialogoDel:function(e){this.itemactual=e,this.dialog_del=!0},deleteDoc:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n["a"].eliminarPropuestaConvocatoriaDocumento({codigo:e.itemactual.codigo});case 3:a=t.sent,o=a.data,o?(e.traeDocumentos(),e.$toasted.success("Se eliminó el documento con éxito",{icon:"done",duration:5e3}),e.itemactual="",e.dialog_del=!1):e.$toasted.error("Se presentó un error al intentar eliminar el documento",{icon:"error",duration:5e3}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()},saveDocumento:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o,r,i,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=0,t.prev=1,0!==e.edit){t.next=11;break}return t.next=5,n["a"].agregarPropuestaConvocatoriaDocumento({propuestaconvocatoria:e.idproceso,descripcion:e.descripcion,tipo:e.tipo});case 5:o=t.sent,r=o.data,console.log(r),r?(a=1,e.$toasted.success("Se agregó el documento con éxito",{icon:"done",duration:5e3}),e.itemactual="",e.dialog_del=!1):e.$toasted.error("Se presentó un error al realizar el proceso",{icon:"error",duration:5e3}),t.next=19;break;case 11:if(e.itemactual.descripcion!==e.descripcion){t.next=14;break}return e.$toasted.error("No hay datos para actualizar",{icon:"error",duration:5e3}),t.abrupt("return");case 14:return t.next=16,n["a"].actualizarPropuestaConvocatoriaDocumento({codigo:e.codigo,descripcion:e.descripcion,propuestaconvocatoria:e.idproceso,tipo:e.tipo});case 16:i=t.sent,c=i.data,c?(a=1,e.$toasted.success("Se modificó el documento con éxito",{icon:"done",duration:5e3}),e.itemactual="",e.dialog_del=!1,e.traeDocumentos()):e.$toasted.error("Se presentó un error al realizar el proceso",{icon:"error",duration:5e3});case 19:a&&(e.itemactual="",e.edit=-1,e.dialog=!1),t.next=29;break;case 22:t.prev=22,t.t0=t["catch"](1),s="",t.t0.response&&t.t0.response.data&&(s=t.t0.response.data.message),""===s&&(s="Se presentó un error al realizar el proceso"),e.traeDocumentos(),e.$toasted.error(s,{icon:"error",duration:5e3});case 29:case"end":return t.stop()}}),t,null,[[1,22]])})))()},cerrarDialogo:function(){this.itemactual="",this.edit=-1,this.dialog=!1}},watch:{idproceso:function(e){this.traeDocumentos()},edit:function(e){e?(this.formTitle="Editar",this.codigo=this.itemactual.codigo,this.descripcion=this.itemactual.descripcion):(this.limpiarDatos(),this.formTitle="Nuevo")}},mounted:function(){this.traeDocumentos()}},s=c,l=a("2877"),d=Object(l["a"])(s,o,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d208e49.4eb1ee52.js.map