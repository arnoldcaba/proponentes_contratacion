(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e704d6e"],{"0b42":function(e,t,a){var r=a("861d"),n=a("e8b5"),s=a("b622"),i=s("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)?r(t)&&(t=t[i],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"1d70":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{justify:"center"}},[a("v-flex",[a("v-card",{staticClass:"mx-auto elevation-2"},[a("v-card-text",[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){return e.abrirDialogoNuevoMsg(1)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mail")])],1),a("v-row",[a("v-col",{attrs:{md:"6",lg:"6",sm:"12"}},[a("v-treeview",{attrs:{items:e.arrTiposMsg,rounded:"",hoverable:"",activatable:"","item-key":"tipo","open-on-click":""},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,n=t.open;return[r.child?a("v-icon",{attrs:{color:"primary"}},[e._v(" mail ")]):a("v-icon",{attrs:{color:"primary"}},[e._v(" "+e._s(n?"mdi-folder-open":"mdi-folder")+" ")])]}},{key:"label",fn:function(t){var r=t.item;return[a("a",{on:{click:function(t){return e.mostrarmensaje(r)}}},[e._v(e._s(r.name))])]}}]),model:{value:e.mensajes,callback:function(t){e.mensajes=t},expression:"mensajes"}})],1),a("v-col",{attrs:{md:"6",lg:"6",sm:"12"}},[a("div",{staticStyle:{color:"black",border:"2px solid #3F51B5","overflow-y":"scroll",height:"300px","border-radius":"5px",padding:"5px 5px 5px 5px"},attrs:{id:"txtmsg"}},[a("span",{domProps:{innerHTML:e._s(e.txtmensaje)}})]),a("br"),a("v-btn",{attrs:{small:"",color:"primary",disabled:""==this.txtmensaje},on:{click:function(t){return e.abrirDialogoNuevoMsg(0)}}},[e._v(" Anexar Respuesta ")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"800",scrollable:""},model:{value:e.dialog_nuevomsg,callback:function(t){e.dialog_nuevomsg=t},expression:"dialog_nuevomsg"}},[a("v-card",{attrs:{elevation:"10"}},[a("v-card-title",{staticClass:"headline justify-center"},[e._v(" "+e._s(e.tituloanexarmsg)+" ")]),a("v-card-text",[a("v-textarea",{attrs:{label:"Mensaje",outlined:"","background-color":"white",rows:"8"},model:{value:e.txtnuevomsg,callback:function(t){e.txtnuevomsg=t},expression:"txtnuevomsg"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:"",disabled:""==e.txtnuevomsg},on:{click:e.guardarMensaje}},[e._v("Agregar Respuesta")]),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_nuevomsg=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},n=[],s=a("1da1"),i=(a("4de4"),a("96cf"),a("7424")),o={name:"anunciosTabMsg",props:["itemactual"],data:function(){return{txtmensaje:"",mensajes:[],arrTiposMsg:[{id:"E",name:"Enviados"},{id:"R",name:"Recibidos"},{id:"S",name:"Sin Leer"},{id:"L",name:"Leídos"}],dataMsg:[],dataMsgHijos:[],dataMsgEnviados:[],dataMsgRecibidos:[],dataMsgSinLeer:[],dataMsgLeidos:[],idpadremsg:"",dialog_nuevomsg:!1,tituloanexarmsg:"",nuevomsg:0,txtnuevomsg:""}},methods:{getMensajes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["b"].getMsgConvocatoriaRegistro({propconvid:e.itemactual.id});case 3:a=t.sent,r=a.data,e.dataMsg=r.data,e.getEnviados(),e.getRecibidos(),e.getSinLeer(),e.getLeidos(),e.getArmarEstructuraMsgt(),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:return t.prev=15,t.finish(15);case 17:case"end":return t.stop()}}),t,null,[[0,13,15,17]])})))()},getMensajesHijos:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["b"].getMsgHijos({propconvid:e.itemactual.id});case 3:a=t.sent,r=a.data,e.dataMsgHijos=r.data,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,null,[[0,8,10,12]])})))()},getArmarEstructuraMsgt:function(){this.arrTiposMsg=[{id:"E",name:"Enviados ("+this.dataMsgEnviados.length+")",children:this.dataMsgEnviados},{id:"R",name:"Recibidos ("+this.dataMsgRecibidos.length+")",children:this.dataMsgRecibidos},{id:"S",name:"Sin Leer ("+this.dataMsgSinLeer.length+")",children:this.dataMsgSinLeer},{id:"L",name:"Leídos ("+this.dataMsgLeidos.length+")",children:this.dataMsgLeidos}]},getEnviados:function(){var e=this;this.dataMsgEnviados=[];for(var t=this.dataMsg.filter((function(t){return t.userid===e.$session.get("usuarioid")})),a=0;a<t.length;a++){var r=t[a];this.dataMsgEnviados.push({id:r.codigo,name:r.fecha,child:1,padre:r.padre})}},getRecibidos:function(){this.dataMsgRecibidos=[];for(var e=this.dataMsg.filter((function(e){return 0===e.userid})),t=0;t<e.length;t++){var a=e[t];this.dataMsgRecibidos.push({id:a.codigo,name:a.fecha,child:1,padre:a.padre})}},getLeidos:function(){this.dataMsgLeidos=[];for(var e=this.dataMsg.filter((function(e){return 0===e.userid&&1===e.leido})),t=0;t<e.length;t++){var a=e[t];this.dataMsgLeidos.push({id:a.codigo,name:a.fecha,child:1,padre:a.padre})}for(var r=this.dataMsgHijos.filter((function(e){return 0===e.userid&&1===e.leido})),n=0;n<r.length;n++){var s=r[n];this.dataMsgLeidos.push({id:s.codigo,name:s.fecha,child:1,padre:s.padre})}},getSinLeer:function(){this.dataMsgSinLeer=[];for(var e=this.dataMsg.filter((function(e){return 0===e.userid&&0===e.leido})),t=0;t<e.length;t++){var a=e[t];this.dataMsgSinLeer.push({id:a.codigo,name:a.fecha,child:1,padre:a.padre})}for(var r=this.dataMsgHijos.filter((function(e){return 0===e.userid&&0===e.leido})),n=0;n<r.length;n++){var s=r[n];this.dataMsgSinLeer.push({id:s.codigo,name:s.fecha,child:1,padre:s.padre})}},buscarMensaje:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o,d,c,u,g,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.dataMsg.filter((function(t){return t.codigo===e})),n="",r.length>0){if(n="<b>Mensaje original: Enviado por: "+r[0].registrado+"<br>Fecha: "+r[0].fecha+"</b><br>"+r[0].mensaje+"<br>",s=t.dataMsgHijos.filter((function(t){return t.padre===e})),s.length>0)for(o=0;o<s.length;o++)d=s[o],c="<b>Enviado por:</b> "+(0!==d.userid?d.nombreusaurio:d.registrado)+"<br>",n+="<br><b>msg: Rta: "+c+"Fecha: "+d.fecha+"</b><br>"+d.mensaje+"<br>"}else r=t.dataMsgHijos.filter((function(t){return t.codigo===e})),r.length>0&&(u="Enviado por: "+(0!==r[0].userid?r[0].nombreusaurio:r[0].registrado)+"<br>",n="<b>msg: "+u+"Fecha: "+r[0].fecha+"</b><br>"+r[0].mensaje+"<br>");return t.txtmensaje=n,a.next=6,i["b"].actualizaMsgleidos({id:e});case 6:g=a.sent,l=g.data,l.respuesta&&t.getMensajes();case 9:case"end":return a.stop()}}),a)})))()},mostrarmensaje:function(e){e.child&&(0!==e.padre?this.idpadremsg=e.padre:this.idpadremsg=e.id,this.buscarMensaje(e.id))},abrirDialogoNuevoMsg:function(e){this.nuevomsg=e,this.tituloanexarmsg=1===e?"Nuevo Mensaje":"Agregar Respuesta",this.txtnuevomsg="",this.dialog_nuevomsg=!0},guardarMensaje:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=1===e.nuevomsg?0:e.idpadremsg,t.next=3,i["b"].agregarMensaje({codigoconvreg:e.itemactual.Idpcr,mensaje:e.txtnuevomsg,padre:a,estado:"E",userid:e.$session.get("usuarioid")});case 3:r=t.sent,n=r.data,n.respuesta?(e.$toasted.success("Se agregó la Respuesta con éxito",{icon:"done",duration:5e3}),e.getMensajes(),e.getMensajesHijos(),e.dialog_nuevomsg=!1):e.$toasted.error("Se presentó error al intentar de agregar el Mensaje",{icon:"error",duration:5e3});case 6:case"end":return t.stop()}}),t)})))()}},watch:{itemactual:{handler:function(e){e&&(this.getMensajes(),this.getMensajesHijos(),this.txtmensaje="")},immediate:!0}},mounted:function(){this.getMensajes(),this.getMensajesHijos()}},d=o,c=a("2877"),u=Object(c["a"])(d,r,n,!1,null,null,null);t["default"]=u.exports},"1dde":function(e,t,a){var r=a("d039"),n=a("b622"),s=a("2d00"),i=n("species");e.exports=function(e){return s>=51||!r((function(){var t=[],a=t.constructor={};return a[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"4de4":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").filter,s=a("1dde"),i=s("filter");r({target:"Array",proto:!0,forced:!i},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(e,t,a){var r=a("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},b727:function(e,t,a){var r=a("0366"),n=a("44ad"),s=a("7b0b"),i=a("50c4"),o=a("65f0"),d=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,g=6==e,l=7==e,v=5==e||g;return function(h,f,m,p){for(var b,M,x=s(h),j=n(x),w=r(f,m,3),k=i(j.length),R=0,L=p||o,y=t?L(h,k):a||l?L(h,0):void 0;k>R;R++)if((v||R in j)&&(b=j[R],M=w(b,R,x),e))if(t)y[R]=M;else if(M)switch(e){case 3:return!0;case 5:return b;case 6:return R;case 2:d.call(y,b)}else switch(e){case 4:return!1;case 7:d.call(y,b)}return g?-1:c||u?u:y}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-1e704d6e.a5d9c5b7.js.map