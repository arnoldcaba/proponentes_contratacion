(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e0f363a"],{"006a":function(e,t,n){"use strict";n("7c7e")},"2dfa":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-flex",[e.item.file_path?e._e():n("v-file-input",e._g(e._b({on:{change:function(t){e.handleFileUpload(t)}},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}})),e._l(e.$slots,(function(t,n){return{key:n,fn:function(){return[e._t(n)]},proxy:!0}}))],null,!0)},"v-file-input",Object.assign({},e.$attrs,e.commonAttrs),!1),e.$listeners)),e.item.file_path?n("v-chip",{staticClass:"ma-2",staticStyle:{margin:"5px"},attrs:{close:"",color:"green darken-2","text-color":"white"},on:{click:function(t){return e.openInNewTab(e.item.file_path)},"click:close":e.removeFile}},[e._v(e._s(e.item.file_name.substring(0,50))+" ")]):e._e()],1)],1)},r=[],i=n("1da1"),o=(n("96cf"),n("b0c0"),n("af91")),s=n("7dee"),c={inheritAttrs:!1,props:{item:{default:function(){return{file_name:"",file_path:""}}}},data:function(){return{}},methods:{handleFileUpload:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null===e){n.next=10;break}return n.next=3,o["a"].uploadToStorage(e);case 3:a=n.sent,t.item.file_size=e.size,t.item.file_type=e.type,t.item.file_name=e.name,t.item.file_path=a.data.path,n.next=14;break;case 10:t.item.file_name="",t.item.file_path="",t.item.file_size="",t.item.file_type="";case 14:t.$emit("file-changed",t.item);case 15:case"end":return n.stop()}}),n)})))()},openInNewTab:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getFileFromStorage(e);case 3:n=t.sent,a=n.data,r=Object(s["a"])(a,"image/jpeg",""),i=window.open(r,"_blank"),i.focus(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},removeFile:function(){this.item.file_name="",this.item.file_path="",this.item.file_size="",this.item.file_type="",this.$emit("file-changed",this.item)}},computed:{commonAttrs:function(){return{persistentHint:!0,dense:!0,hideDetails:!1}}}},u=c,l=n("2877"),d=Object(l["a"])(u,a,r,!1,null,"769812f2",null);t["a"]=d.exports},"7c7e":function(e,t,n){},c9f2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"adjuntos"}},e._l(e.dataAdjuntos,(function(t){return n("v-card",{key:t.tipo,staticClass:"mx-auto",attrs:{dense:""}},[1==t.tipo||2==t.tipo&&1==e.cargardefinitivo?n("v-card",[n("v-card-title",[e._v(e._s(1==t.tipo?"Preliminar":"Definitivo"))]),n("v-card-text",[n("v-btn",{attrs:{text:""}},[n("AddFilesToStorage",{key:e.fileReset,attrs:{item:t,placeholder:"Cargar Archivo",dense:"","hide-details":"","prepend-icon":""},on:{"remove-file":function(t){e.fileReset++},"file-changed":function(t){e.fileReset++}}})],1),n("v-autocomplete",{attrs:{items:e.estados,label:"Validación","item-text":"texto","item-value":"id","hide-details":"","cache-items":!1},model:{value:t.estado,callback:function(n){e.$set(t,"estado",n)},expression:"item.estado"}}),n("br"),n("v-textarea",{attrs:{name:"input-7-1",filled:"",label:"Observación",rows:"1"},model:{value:t.observacion,callback:function(n){e.$set(t,"observacion",n)},expression:"item.observacion"}})],1),n("v-card-actions",[n("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"primary"},on:{click:function(n){return e.guardarEstadoMinuta(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(" save ")])],1)],1)],1):e._e(),n("br")],1)})),1)},r=[],i=n("1da1"),o=(n("96cf"),n("2dfa")),s=n("7424"),c=n("af91"),u=n("7dee"),l={props:["idpropconv"],components:{AddFilesToStorage:o["a"]},data:function(){return{dataAdjuntos:[],resetComponent:0,fileReset:0,cargardefinitivo:0,estados:[{id:"A",texto:"APROBADO"},{id:"R",texto:"RECHAZADO"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getData();case 1:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataAdjuntos=[],t.next=3,s["a"].buscarMinutaContrato({idpropconv:e.idpropconv});case 3:n=t.sent,a=n.data,e.dataAdjuntos=a.archivos,e.dataAdjuntos.length>0&&(r=e.dataAdjuntos[0],1===r.tipo&&"A"===r.estado&&(e.cargardefinitivo=1));case 7:case"end":return t.stop()}}),t)})))()},openInNewTab:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c["a"].getFileFromStorage(e);case 3:a=n.sent,r=a.data,i=Object(u["a"])(r,t,""),o=window.open(i,"_blank"),o.focus(),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},guardarEstadoMinuta:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==e.estado&&""!==e.observacion){n.next=3;break}return t.$toasted.error("Debe ingresar el estado y  la observación",{icon:"error",duration:5e3}),n.abrupt("return");case 3:return n.next=5,s["a"].voboMinutaContrato({idpropconv:t.idpropconv,tipo:e.tipo,estado:e.estado,observacion:e.observacion});case 5:a=n.sent,r=a.data,r?(t.$toasted.success("Se actualizó el estado de la minuta con éxito",{icon:"done",duration:5e3}),t.getData()):t.$toasted.error("Error desconocido",{icon:"error",duration:5e3});case 8:case"end":return n.stop()}}),n)})))()}},computed:{adjuntos:{get:function(){return this.dataAdjuntos},set:function(e){this.adjuntos=e}}},watch:{idpropconv:function(e){this.getData()}}},d=l,f=(n("006a"),n("2877")),p=Object(f["a"])(d,a,r,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5e0f363a.b4d5f685.js.map