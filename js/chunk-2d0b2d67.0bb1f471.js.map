{"version":3,"sources":["webpack:///./src/components/adminApp/FormulacionContractualPre.vue?1071","webpack:///src/components/adminApp/FormulacionContractualPre.vue","webpack:///./src/components/adminApp/FormulacionContractualPre.vue?e7d1","webpack:///./src/components/adminApp/FormulacionContractualPre.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","model","value","callback","$$v","search","expression","headers","dataConsulta","scopedSlots","_u","key","fn","ref","item","on","$event","oferentesPropuestas","id","titulo","dialog_oferentes","_s","tituloOferentes","searchOferente","headersOferente","oferentes","selProponente","length","adjudicarProceso","staticRenderFns","name","data","tipo_evaluacion","arrTipoEvaluacion","methods","mounted","propuestasCerradas","component"],"mappings":"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","file":"js/chunk-2d0b2d67.0bb1f471.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"justify\":\"center\"}},[_c('v-flex',[_c('v-card',{staticClass:\"mx-auto\"},[_c('v-card-title',{staticClass:\"justify-center\"},[_vm._v(\"Formalización contractual preliminar\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('br'),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.dataConsulta,\"search\":_vm.search},scopedSlots:_vm._u([{key:\"item.verOferentes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-5\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.oferentesPropuestas(item.id,item.titulo)}}},[_vm._v(\" person \")])]}}])})],1)],1)],1)],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"1200\",\"scrollable\":\"\"},model:{value:(_vm.dialog_oferentes),callback:function ($$v) {_vm.dialog_oferentes=$$v},expression:\"dialog_oferentes\"}},[_c('v-card',{attrs:{\"elevation\":\"10\"}},[_c('v-card-title',{staticClass:\"headline justify-center\"},[_vm._v(\" \"+_vm._s((\"Adjudicación para el proceso '\" + _vm.tituloOferentes + \"'\"))+\" \")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.searchOferente),callback:function ($$v) {_vm.searchOferente=$$v},expression:\"searchOferente\"}}),_c('br'),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headersOferente,\"items\":_vm.oferentes,\"search\":_vm.searchOferente,\"single-select\":true,\"show-select\":\"\",\"item-key\":\"proponente\"},model:{value:(_vm.selProponente),callback:function ($$v) {_vm.selProponente=$$v},expression:\"selProponente\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\",\"disabled\":_vm.selProponente.length <= 0},on:{\"click\":_vm.adjudicarProceso}},[_vm._v(\"Adjudicar\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog_oferentes=false}}},[_vm._v(\"Cancelar\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container justify=\"center\">\n    <v-flex>\n      <v-card class=\"mx-auto\">\n        <v-card-title class=\"justify-center\">Formalización contractual preliminar</v-card-title>\n        <v-card-text>\n            <v-row>\n                <v-col cols=\"12\">\n                    <v-text-field\n                        v-model=\"search\"\n                        append-icon=\"search\"\n                        label=\"Buscar\"\n                        single-line\n                        hide-details\n                    >\n                    </v-text-field>\n                    <br>\n                    <v-data-table\n                        :headers=\"headers\"\n                        :items=\"dataConsulta\"\n                        :search=\"search\"\n                        class=\"elevation-1\"\n                    >\n                      <template v-slot:item.verOferentes=\"{ item }\">\n                        <v-icon\n                          class=\"mr-5\"\n                          color=\"primary\"\n                          @click=\"oferentesPropuestas(item.id,item.titulo)\"\n                        >\n                          person\n                        </v-icon>\n                      </template>\n                    </v-data-table>\n                </v-col>\n            </v-row>\n        </v-card-text>\n      </v-card>\n    </v-flex>\n\n    <v-dialog\n      v-model=\"dialog_oferentes\"\n      persistent\n      max-width=\"1200\"\n      scrollable\n    >\n      <v-card elevation=\"10\">\n        <v-card-title class=\"headline justify-center\">\n          {{ `Adjudicación para el proceso '${tituloOferentes}'` }}\n        </v-card-title>\n        <v-card-text>\n          <v-text-field\n              v-model=\"searchOferente\"\n              append-icon=\"search\"\n              label=\"Buscar\"\n              single-line\n              hide-details\n          >\n          </v-text-field>\n          <br>\n          <v-data-table\n              :headers=\"headersOferente\"\n              :items=\"oferentes\"\n              :search=\"searchOferente\"\n              class=\"elevation-1\"\n              :single-select=\"true\"\n              show-select\n              v-model=\"selProponente\"\n              item-key=\"proponente\"\n          >\n          </v-data-table>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" dark text @click=\"adjudicarProceso\" :disabled=\"selProponente.length <= 0\">Adjudicar</v-btn>\n          <v-btn color=\"primary\" dark text @click=\"dialog_oferentes=false\">Cancelar</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n<script>\nimport { EventBus } from '@/main'\nimport { adminApp, anunciosProcAdquisicion } from '@/services/api'\nexport default {\n  name: 'formulacionContractualPre',\n  data () {\n    return {\n      search: '',\n      tipo_evaluacion: '',\n      oferentes: [],\n      dialog_oferentes: false,\n      searchOferente: '',\n      tituloOferentes: '',\n      selProponente: [],\n      arrTipoEvaluacion: [\n        { value: 'PM', text: 'Proceso Manual' },\n        { value: 'AC', text: 'Algoritmo de cálculo' }\n      ],\n      dataConsulta: [],\n      headers: [\n        { text: 'Título del proceso', align: 'left', value: 'titulo', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Fecha límite', align: 'left', value: 'fecha_cierre_format', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Tipo de proceso', align: 'left', value: 'tipo_contratacion', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Estado', align: 'left', value: 'estado', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Referencia', align: 'left', value: 'referencia', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Oferentes', align: 'center', value: 'verOferentes', class: 'subtitle-1 font-weight-bold black--text' }\n      ],\n      headersOferente: [\n        { text: 'Nombre/Razón social', align: 'left', value: 'Nombre', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Identificación', align: 'left', value: 'identificacion', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Fecha', align: 'left', value: 'fecha', class: 'subtitle-1 font-weight-bold black--text' }\n      ]\n    }\n  },\n  methods: {\n    async propuestasCerradas () {\n      try {\n        const { data } = await adminApp.propuestasCerradas()\n        this.dataConsulta = data\n      } catch (error) {\n        console.log(error)\n      } finally {\n      }\n    },\n    async oferentesPropuestas (codigopropuesta, nombre) {\n      try {\n        const { data } = await adminApp.oferentesPropuestas({ codigopropuesta: codigopropuesta })\n        this.oferentes = data\n        this.tituloOferentes = nombre\n        this.dialog_oferentes = true\n      } catch (error) {\n        console.log(error)\n      } finally {\n      }\n    },\n    async adjudicarProceso () {\n      if (this.selProponente.length <= 0) {\n        this.$toasted.error('No se ha seleccionado ningún oferente', { icon: 'error', duration: 5000 })\n        return\n      }\n\n      const codigopropuesta = this.selProponente[0].consecutivo\n      const contratista = this.selProponente[0].proponente\n      const llave = this.selProponente[0].llave\n      const titulopropuesta = this.selProponente[0].titulopropuesta\n\n      try {\n        const { data } = await adminApp.adjudicarProceso(\n          {\n            proceso: codigopropuesta,\n            contratista: contratista\n          }\n        )\n        if (data.result) {\n          if (data.result === 'ok') {\n            this.$toasted.success(data.mensaje, { icon: 'done', duration: 5000 })\n            this.guardarMensaje(llave, titulopropuesta)\n            this.propuestasCerradas()\n            EventBus.$emit('actualizarPropuesta')\n            this.dialog_oferentes = false\n          } else {\n            this.$toasted.error(data.mensaje, { icon: 'error', duration: 5000 })\n          }\n        } else {\n          this.$toasted.error('Se presentó un error al intentar de realizar él proceso', { icon: 'error', duration: 5000 })\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n      }\n    },\n    async guardarMensaje (Idpcr, NomProceso) {\n      const mensaje = \"Felicitaciones!!. Se le ha adjudicado el proceso '\" + NomProceso + \"'\"\n      const idpadre = 0\n      const { data } = await anunciosProcAdquisicion.agregarMensaje({\n        codigoconvreg: Idpcr,\n        mensaje: mensaje,\n        padre: idpadre,\n        estado: 'E',\n        userid: this.$session.get('usuarioid'),\n        necesitacodpadre: '1'\n      })\n      if (data.respuesta) {\n        console.log(data.respuesta)\n      } else {\n        // this.$toasted.error('Se presentó error al intentar de agregar el Mensaje', { icon: 'error', duration: 5000 })\n      }\n    }\n  },\n  mounted () {\n    this.propuestasCerradas()\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormulacionContractualPre.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormulacionContractualPre.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormulacionContractualPre.vue?vue&type=template&id=42ab4dc4&\"\nimport script from \"./FormulacionContractualPre.vue?vue&type=script&lang=js&\"\nexport * from \"./FormulacionContractualPre.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}