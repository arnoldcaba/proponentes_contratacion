(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e50d59b"],{"0b42":function(e,t,n){var r=n("861d"),a=n("e8b5"),o=n("b622"),i=o("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?r(t)&&(t=t[i],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),o=n("2d00"),i=a("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"2dfa":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-flex",[e.item.file_path?e._e():n("v-file-input",e._g(e._b({on:{change:function(t){e.handleFileUpload(t)}},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}})),e._l(e.$slots,(function(t,n){return{key:n,fn:function(){return[e._t(n)]},proxy:!0}}))],null,!0)},"v-file-input",Object.assign({},e.$attrs,e.commonAttrs),!1),e.$listeners)),e.item.file_path?n("v-chip",{staticClass:"ma-2",staticStyle:{margin:"5px"},attrs:{close:"",color:"green darken-2","text-color":"white"},on:{click:function(t){return e.openInNewTab(e.item.file_path)},"click:close":e.removeFile}},[e._v(e._s(e.item.file_name.substring(0,50))+" ")]):e._e()],1)],1)},a=[],o=n("1da1"),i=(n("96cf"),n("b0c0"),n("af91")),s=n("7dee"),c={inheritAttrs:!1,props:{item:{default:function(){return{file_name:"",file_path:""}}}},data:function(){return{}},methods:{handleFileUpload:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null===e){n.next=10;break}return n.next=3,i["a"].uploadToStorage(e);case 3:r=n.sent,t.item.file_size=e.size,t.item.file_type=e.type,t.item.file_name=e.name,t.item.file_path=r.data.path,n.next=14;break;case 10:t.item.file_name="",t.item.file_path="",t.item.file_size="",t.item.file_type="";case 14:t.$emit("file-changed",t.item);case 15:case"end":return n.stop()}}),n)})))()},openInNewTab:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].getFileFromStorage(e);case 3:n=t.sent,r=n.data,a=Object(s["a"])(r,"image/jpeg",""),o=window.open(a,"_blank"),o.focus(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},removeFile:function(){this.item.file_name="",this.item.file_path="",this.item.file_size="",this.item.file_type="",this.$emit("file-changed",this.item)}},computed:{commonAttrs:function(){return{persistentHint:!0,dense:!0,hideDetails:!1}}}},u=c,l=n("2877"),d=Object(l["a"])(u,r,a,!1,null,"769812f2",null);t["a"]=d.exports},3104:function(e,t,n){"use strict";n("5b81")},"5b81":function(e,t,n){},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},b3e6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"adjuntos"}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataAdjuntos},scopedSlots:e._u([{key:"item.descripcionestado",fn:function(t){var r=t.item;return[n("span",{class:[{ColorVBFalse:"REZ"===r.estado},{ColorVBTrue:"REZ"!==r.estado}]},[e._v(e._s(r.descripcionestado)+" ")])]}},{key:"item.carguearchivo",fn:function(t){var r=t.item;return["VAL"==r.estado?n("v-chip",{staticClass:"ma-2",staticStyle:{margin:"5px"},attrs:{color:"green darken-2","text-color":"white"},on:{click:function(t){return e.openInNewTab(r.file_path,r.file_type)}}},[e._v(" "+e._s(r.file_name.substring(0,50))+" ")]):n("v-btn",{attrs:{text:""}},[n("AddFilesToStorage",{key:e.fileReset,attrs:{item:r,placeholder:"Cargar Archivo",dense:"","hide-details":"","prepend-icon":""},on:{"remove-file":function(t){e.fileReset++},"file-changed":function(t){e.fileReset++}}})],1)]}}])}),n("br"),n("v-btn",{staticClass:"mx-2",staticStyle:{bottom:"70px"},attrs:{absolute:"",bottom:"",left:"",fab:"",dark:"",color:"primary"},on:{click:e.guardarDocumentos}},[n("v-icon",{attrs:{dark:""}},[e._v(" save ")])],1),0==e.enviado&&e.totalarchivos==e.totalcargados?n("v-btn",{staticClass:"mx-2",staticStyle:{bottom:"30px"},attrs:{absolute:"",bottom:"",left:"",dark:"",color:"primary"},on:{click:e.enviarJuridica}},[e._v(" Enviar ")]):e._e(),n("br")],1)},a=[],o=n("1da1"),i=(n("96cf"),n("2dfa")),s=n("7424"),c=n("af91"),u=n("7dee"),l={props:["idregistro","tipodoc","idpropconv"],components:{AddFilesToStorage:i["a"]},data:function(){return{dataAdjuntos:[],proponenteId:"",totalarchivos:0,totalcargados:0,enviado:0,headers:[{text:"Descripción",align:"left",value:"descripciondocumento",class:"subtitle-1 font-weight-bold black--text"},{text:"Estado",align:"left",sortable:!1,value:"descripcionestado",class:"subtitle-1 font-weight-bold black--text"},{text:"Observación",align:"left",sortable:!1,value:"observacion",class:"subtitle-1 font-weight-bold black--text"},{text:"Archivo",align:"left",sortable:!1,value:"carguearchivo",class:"subtitle-1 font-weight-bold black--text"}],resetComponent:0,fileReset:0}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.traeDocumentacionFaltante(),e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{traeDocumentacionFaltante:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].agregaDocumentoContratoRegistro({registro:e.idregistro,tipo:e.tipodoc,idpropconv:e.idpropconv});case 2:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataAdjuntos=[],t.next=3,s["b"].buscarAdjuntosDocumentoContratoRegistro({registro:e.idregistro,tipo:e.tipodoc,idpropconv:e.idpropconv});case 3:n=t.sent,r=n.data,e.dataAdjuntos=r.archivos,e.totalarchivos=e.dataAdjuntos.length,e.totalcargados=0,a=0;case 9:if(!(a<e.totalarchivos)){t.next=19;break}if(o=e.dataAdjuntos[a],console.log(o.estado),"EVA"!==o.estado){t.next=15;break}return e.enviado=1,t.abrupt("break",19);case 15:""!==o.file_name&&""!==o.file_path&&(e.totalcargados+=1);case 16:a++,t.next=9;break;case 19:case"end":return t.stop()}}),t)})))()},actAdjuntos:function(e){e.file_path?(e.nombre=e.file_name,e.path=e.file_path):(e.nombre="",e.path=""),this.resetComponent++},guardarDocumentos:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=[],r=0;r<e.adjuntos.length;r++)a=e.adjuntos[r],n.push({idpproconvreg:e.idregistro,idpproconvdoc:a.proconvdoc,file_name:a.file_name,file_path:a.file_path,file_size:a.file_size,file_type:a.file_type});return t.next=4,s["b"].guardardatosAdjuntosDocContratacion({dataadjuntos:n});case 4:o=t.sent,i=o.data,i.tipo?"success"===i.tipo?(e.$toasted.success(i.mensaje,{icon:"done",duration:5e3}),e.getData()):e.$toasted.error(i.mensaje,{icon:"error",duration:5e3}):e.$toasted.error("Error desconocido",{icon:"error",duration:5e3});case 7:case"end":return t.stop()}}),t)})))()},enviarJuridica:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].enviarDocumentosContratoJuridica({registro:e.idregistro,tipo:e.tipodoc,propconvid:e.idpropconv});case 2:n=t.sent,r=n.data,r?(e.$toasted.success("Se hizo el envío al área jurídica con éxito",{icon:"done",duration:5e3}),e.getData()):e.$toasted.error("Error desconocido",{icon:"error",duration:5e3});case 5:case"end":return t.stop()}}),t)})))()},openInNewTab:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c["a"].getFileFromStorage(e);case 3:r=n.sent,a=r.data,o=Object(u["a"])(a,t,""),i=window.open(o,"_blank"),i.focus(),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()}},computed:{adjuntos:{get:function(){return this.dataAdjuntos},set:function(e){this.adjuntos=e}}},watch:{idregistro:function(e){this.dataAdjuntos=[],this.traeDocumentacionFaltante(),this.getData()},tipodoc:function(e){this.traeDocumentacionFaltante(),this.getData()},idpropconv:function(e){this.traeDocumentacionFaltante(),this.getData()}}},d=l,f=(n("3104"),n("2877")),p=Object(f["a"])(d,r,a,!1,null,null,null);t["default"]=p.exports},b727:function(e,t,n){var r=n("0366"),a=n("44ad"),o=n("7b0b"),i=n("50c4"),s=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,p=5==e||d;return function(m,h,v,b){for(var g,_,x=o(m),w=a(x),k=r(h,v,3),j=i(w.length),y=0,A=b||s,R=t?A(m,j):n||f?A(m,0):void 0;j>y;y++)if((p||y in w)&&(g=w[y],_=k(g,y,x),e))if(t)R[y]=_;else if(_)switch(e){case 3:return!0;case 5:return g;case 6:return y;case 2:c.call(R,g)}else switch(e){case 4:return!1;case 7:c.call(R,g)}return d?-1:u||l?l:R}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-6e50d59b.bc873a52.js.map