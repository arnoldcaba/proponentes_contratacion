(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4bee"],{"086f":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-container",{attrs:{fluid:""}},[t("v-flex",[t("div",{staticStyle:{"padding-bottom":"10px"}},[t("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.abrirDialogoNuevo}},[t("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1),t("v-card",{staticClass:"elevation-2"},[t("v-card-title",{staticClass:"headline justify-center"},[e._v(" "+e._s(e.itemactual.referencia+" - "+e.itemactual.titulo)+" ")]),t("v-card-text",[t("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}}),t("br"),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataNovedades,search:e.search},scopedSlots:e._u([{key:"item.valoranterior",fn:function(a){var r=a.item;return[t("span",[e._v(" "+e._s(e.$formatonumero(r.valoranterior,2,1))+" ")])]}},{key:"item.valornuevo",fn:function(a){var r=a.item;return[t("span",[e._v(" "+e._s(e.$formatonumero(r.valornuevo,2,1))+" ")])]}}])})],1)],1)],1),t("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.dialog_new,callback:function(a){e.dialog_new=a},expression:"dialog_new"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Nueva novedad")])]),t("v-card-text",[t("v-form",{ref:"form",model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-flex",[t("v-autocomplete",{attrs:{items:e.dataTipoNovedades,"item-text":"descripcion","item-value":"codigo","hide-details":"","cache-items":!1},on:{change:e.traeDatoActual},model:{value:e.tiposnovedad,callback:function(a){e.tiposnovedad=a},expression:"tiposnovedad"}})],1),t("br"),t("br"),t("v-flex",[1==e.tiposnovedad||3==e.tiposnovedad||4==e.tiposnovedad||6==e.tiposnovedad||7==e.tiposnovedad?t("div",{attrs:{id:"dvFechas"}},[t("v-text-field",{attrs:{label:"Valor actual",readonly:!0},model:{value:e.fechaanterior,callback:function(a){e.fechaanterior=a},expression:"fechaanterior"}}),t("v-text-field",{attrs:{label:"Valor nuevo",type:"date"},model:{value:e.fechanueva,callback:function(a){e.fechanueva=a},expression:"fechanueva"}})],1):e._e()]),t("v-flex",[2==e.tiposnovedad||3==e.tiposnovedad||4==e.tiposnovedad||7==e.tiposnovedad?t("div",{attrs:{id:"dvValor"}},[t("v-text-field",{attrs:{label:"Valor actual",readonly:!0},model:{value:e.valoranterior,callback:function(a){e.valoranterior=a},expression:"valoranterior"}}),t("v-text-field",{attrs:{label:"Valor nuevo"},model:{value:e.valornuevo,callback:function(a){e.valornuevo=a},expression:"valornuevo"}})],1):e._e()]),t("v-flex",[5==e.tiposnovedad?t("div",{attrs:{id:"dvOferente"}},[t("v-text-field",{attrs:{label:"Valor actual",readonly:!0},model:{value:e.textoanterior,callback:function(a){e.textoanterior=a},expression:"textoanterior"}}),t("v-autocomplete",{attrs:{items:e.oferentespropuestas,"item-text":"Nombre","item-value":"proponente",dense:"",label:"Nuevo oferente",autocomplete:"off","cache-items":!1},model:{value:e.oferentenuevo,callback:function(a){e.oferentenuevo=a},expression:"oferentenuevo"}})],1):e._e()]),t("v-flex",[8==e.tiposnovedad?t("div",{attrs:{id:"dvAbogado"}},[t("v-text-field",{attrs:{label:"Valor actual",readonly:!0},model:{value:e.textoanterior,callback:function(a){e.textoanterior=a},expression:"textoanterior"}}),t("v-autocomplete",{attrs:{items:e.abogados,"item-text":"nombrecompleto","item-value":"codigo",dense:"",label:"Nuevo supervisor",autocomplete:"off","cache-items":!1},model:{value:e.supervisorproceso,callback:function(a){e.supervisorproceso=a},expression:"supervisorproceso"}})],1):e._e()])],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",text:"",disabled:""==e.fechanueva&&(0==e.valornuevo||""==e.valornuevo)&&""==e.textonuevo&&""==e.supervisorproceso&&""==e.oferentenuevo},on:{click:e.agregarNovedad}},[e._v("Guardar")]),t("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){e.dialog_new=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},o=[],n=t("1da1"),i=(t("4de4"),t("ac1f"),t("1276"),t("d3b7"),t("25f0"),t("96cf"),t("7424")),s={name:"novedadesProceso",props:["itemactual","oferentes"],data:function(){return{search:"",dialog_new:!1,itemadd:"",valid:!1,dataTipoNovedades:[],dataNovedades:[],tiposnovedad:"",fechaanterior:"",fechanueva:"",valoranterior:0,valornuevo:0,textoanterior:"",textonuevo:"",oferentespropuestas:[],abogados:[],supervisorproceso:"",oferentenuevo:"",headers:[{text:"Tipo de novedad",width:"250",align:"left",value:"tiponovedad",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha Novedad",width:"170",align:"left",value:"fecha",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha anterior",width:"170",align:"left",value:"fechaanterior",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha nueva",width:"150",align:"left",value:"fechanueva",class:"subtitle-1 font-weight-bold black--text"},{text:"Valor anterior",width:"200",align:"left",value:"valoranterior",class:"subtitle-1 font-weight-bold black--text"},{text:"Valor nuevo",width:"200",align:"left",value:"valornuevo",class:"subtitle-1 font-weight-bold black--text"},{text:"Supervisor/Proveedor anterior",width:"300",align:"left",value:"textoanterior",class:"subtitle-1 font-weight-bold black--text"},{text:"Supervisor/Proveedor nuevo",width:"300",align:"left",value:"textonuevo",class:"subtitle-1 font-weight-bold black--text"}]}},methods:{limpiarData:function(){this.fechaanterior="",this.fechanueva="",this.valoranterior=0,this.valornuevo=0,this.textoanterior="",this.textonuevo="",this.supervisorproceso="",this.oferentenuevo=""},abrirDialogoNuevo:function(){this.limpiarData(),this.dialog_new=!0},getTipoNovedades:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].tipoNovedadProcesos();case 2:t=a.sent,r=t.data,console.log(r.data),e.dataTipoNovedades=r.data;case 6:case"end":return a.stop()}}),a)})))()},getNovedades:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].NovedadesProcesos({procesoid:e.itemactual.id});case 2:t=a.sent,r=t.data,e.dataNovedades=r.data;case 5:case"end":return a.stop()}}),a)})))()},traeAbogados:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i["a"].personalPorArea({area:7});case 3:t=a.sent,r=t.data,r.data&&(e.abogados=r.data.filter((function(e){return 1===e.codigoestado}))),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0);case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}}),a,null,[[0,8,11,13]])})))()},traeOferentes:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].oferentesPropuestas({codigopropuesta:e.itemactual.id});case 2:t=a.sent,r=t.data,console.log(r),e.oferentespropuestas=r;case 6:case"end":return a.stop()}}),a)})))()},traeDatoActual:function(){if(console.log(this.itemactual,this.oferentes),this.limpiarData(),0!==this.tiposnovedad){var e="",a=[];switch(this.tiposnovedad){case 1:e=this.itemactual.fecha_terminacion_definitiva,a=e.split("-"),this.fechaanterior=a[2]+"/"+a[1]+"/"+a[0];break;case 2:e=this.$formatonumero(this.itemactual.valor_total_contrato,2,1),this.valoranterior=e;break;case 3:e=this.itemactual.fecha_terminacion_definitiva,a=e.split("-"),this.fechaanterior=a[2]+"/"+a[1]+"/"+a[0],this.valoranterior=this.$formatonumero(this.itemactual.valor_total_contrato,2,1);break;case 4:e=this.itemactual.fecha_terminacion_definitiva,a=e.split("-"),this.fechaanterior=a[2]+"/"+a[1]+"/"+a[0],this.valoranterior=this.$formatonumero(this.itemactual.valor_total_contrato,2,1);break;case 5:this.textoanterior=this.oferentes[0].Nombre;break;case 6:e=this.itemactual.fecha_terminacion_definitiva,a=e.split("-"),this.fechaanterior=a[2]+"/"+a[1]+"/"+a[0];break;case 7:e=this.itemactual.fecha_terminacion_definitiva,a=e.split("-"),this.fechaanterior=a[2]+"/"+a[1]+"/"+a[0],this.valoranterior=this.$formatonumero(this.itemactual.valor_total_contrato,2,1);break;case 8:this.textoanterior=this.itemactual.nombresupervisor;break;default:break}}},agregarNovedad:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r,o,n,s,l,c,d,u,v,p,f,h,m,b,x,g,w,k,_,$,N,y;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t="",r="",o="",n="",s="",l="",c="",d="",u=[],v=1,r="",n="",a.t0=e.tiposnovedad,a.next=1===a.t0?15:2===a.t0?30:3===a.t0?38:4===a.t0?52:5===a.t0?66:6===a.t0?76:7===a.t0?88:8===a.t0?101:111;break;case 15:return u=e.fechaanterior.split("/"),t=u[2]+"-"+u[1]+"-"+u[0],o=e.fechanueva,u=e.fechanueva.split("-"),p=new Date(t),f=new Date(u[0]+"-"+(parseInt(u[1])+1).toString()+"-"+u[2]),console.log(p,f),p>=f&&(e.$toasted.error("La fecha de terminación nueva debe ser mayor a la anterior",{icon:"error",duration:5e3}),v=0),s=t,l=o,t=0,o=0,c="",d="",a.abrupt("break",112);case 30:return o=e.$limpiarMoneda(e.valornuevo),t=e.$limpiarMoneda(e.valoranterior),parseFloat(o)<=0&&(e.$toasted.error("El valor a adicionar debe ser mayor a 0 (cero)",{icon:"error",duration:5e3}),v=0),s="",l="",c="",d="",a.abrupt("break",112);case 38:return u=e.fechaanterior.split("/"),t=u[2]+"-"+u[1]+"-"+u[0],u=e.fechanueva.split("-"),h=new Date(t),m=new Date(new Date(u[0]+"-"+(parseInt(u[1])+1).toString()+"-"+u[2])),o=e.fechanueva,h<=m?(e.$toasted.error("La fecha de terminación nueva debe ser mayor a la anterior",{icon:"error",duration:5e3}),v=0):(r=e.$limpiarMoneda(e.valoranterior),n=e.$limpiarMoneda(e.valornuevo),parseFloat(o)<=0&&(e.$toasted.error("El valor a adicionar debe ser mayor a 0 (cero)",{icon:"error",duration:5e3}),v=0)),s=t,l=o,t=r,o=n,c="",d="",a.abrupt("break",112);case 52:return u=e.fechaanterior.split("/"),t=u[2]+"-"+u[1]+"-"+u[0],u=e.fechanueva.split("-"),b=new Date(t),x=new Date(u[0]+"-"+(parseInt(u[1])+1).toString()+"-"+u[2]),o=e.fechanueva,b<=x?(e.$toasted.error("La fecha de terminación nueva debe ser menor a la anterior",{icon:"error",duration:5e3}),v=0):(r=e.$limpiarMoneda(e.valoranterior),n=e.$limpiarMoneda(e.valornuevo),parseFloat(o)<=0&&(e.$toasted.error("El valor a restar debe ser mayor a 0 (cero)",{icon:"error",duration:5e3}),v=0)),s=t,l=o,t=r,o=n,c="",d="",a.abrupt("break",112);case 66:return e.oferentenuevo===e.oferentes[0].proponente&&(e.$toasted.error("El nuevo contratista del proceso es el mismo que el anterior",{icon:"error",duration:5e3}),v=0),t=e.oferentes[0].proponente,o=e.oferentenuevo,s="",l="",c=t,d=o,t=0,o=0,a.abrupt("break",112);case 76:return u=e.fechaanterior.split("/"),t=u[2]+"-"+u[1]+"-"+u[0],g=new Date(t),w=new Date(e.fechanueva),g>=w&&(e.$toasted.error("La fecha de terminación nueva debe ser mayor a la anterior",{icon:"error",duration:5e3}),v=0),s=t,l=e.fechanueva,t=0,o=0,c="",d="",a.abrupt("break",112);case 88:return u=e.fechaanterior.split("/"),t=u[2]+"-"+u[1]+"-"+u[0],k=new Date(t),_=new Date(e.fechanueva),o=e.fechanueva,k>=_?(e.$toasted.error("La fecha de terminación nueva debe ser menor a la anterior",{icon:"error",duration:5e3}),v=0):(r=e.$limpiarMoneda(e.valoranterior),n=e.$limpiarMoneda(e.valornuevo),parseFloat(o)<=0&&(e.$toasted.error("El valor a restar debe ser mayor a 0 (cero)",{icon:"error",duration:5e3}),v=0)),s=t,l=o,t=r,o=n,c="",d="",a.abrupt("break",112);case 101:return e.supervisorproceso===e.itemactual.supervisor?(e.$toasted.error("El nuevo supervisor del proceso es el mismo que el anterior",{icon:"error",duration:5e3}),v=0):e.supervisorproceso===e.itemactual.abogado&&(e.$toasted.error("El nuevo supervisor y el abogado del proceso, son la misma persona",{icon:"error",duration:5e3}),v=0),t=e.itemactual.nombresupervisor,o=e.supervisorproceso,s="",l="",c=t,d=o,t=0,o=0,a.abrupt("break",112);case 111:return a.abrupt("break",112);case 112:if(1!==v){a.next=119;break}return $={procesoid:e.itemactual.id,tiponovedadid:e.tiposnovedad,fechaanterior:s,fechanueva:l,valoranterior:t,valornuevo:o,textoanterior:c,textonuevo:d},a.next=116,i["a"].guardarNovedadProceso({data:$});case 116:N=a.sent,y=N.data,"1"===y.respuesta||1===y.respuesta?(e.$toasted.success("Se realizó la novedad con éxito",{icon:"check",duration:5e3}),e.getNovedades(),e.dialog_new=!1):e.$toasted.error("Se presentó un error al intentar agregar la información",{icon:"error",duration:5e3});case 119:case"end":return a.stop()}}),a)})))()}},watch:{itemactual:{handler:function(e){e&&(this.traeOferentes(),this.getNovedades())},immediate:!0}},mounted:function(){this.traeAbogados(),this.getTipoNovedades(),this.getNovedades()}},l=s,c=t("2877"),d=Object(c["a"])(l,r,o,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0a4bee.a9a8356c.js.map