(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2d67"],{"268e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{justify:"center"}},[a("v-flex",[a("v-card",{staticClass:"mx-auto"},[a("v-card-title",{staticClass:"justify-center"},[e._v("Formalización contractual preliminar")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("br"),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataConsulta,search:e.search},scopedSlots:e._u([{key:"item.verOferentes",fn:function(t){var r=t.item;return[a("v-icon",{staticClass:"mr-5",attrs:{color:"primary"},on:{click:function(t){return e.oferentesPropuestas(r.id,r.titulo)}}},[e._v(" person ")])]}}])})],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"1200",scrollable:""},model:{value:e.dialog_oferentes,callback:function(t){e.dialog_oferentes=t},expression:"dialog_oferentes"}},[a("v-card",{attrs:{elevation:"10"}},[a("v-card-title",{staticClass:"headline justify-center"},[e._v(" "+e._s("Adjudicación para el proceso '"+e.tituloOferentes+"'")+" ")]),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.searchOferente,callback:function(t){e.searchOferente=t},expression:"searchOferente"}}),a("br"),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersOferente,items:e.oferentes,search:e.searchOferente,"single-select":!0,"show-select":"","item-key":"proponente"},model:{value:e.selProponente,callback:function(t){e.selProponente=t},expression:"selProponente"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:"",disabled:e.selProponente.length<=0},on:{click:e.adjudicarProceso}},[e._v("Adjudicar")]),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_oferentes=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},n=[],s=a("1da1"),o=(a("96cf"),a("56d7")),c=a("7424"),l={name:"formulacionContractualPre",data:function(){return{search:"",tipo_evaluacion:"",oferentes:[],dialog_oferentes:!1,searchOferente:"",tituloOferentes:"",selProponente:[],arrTipoEvaluacion:[{value:"PM",text:"Proceso Manual"},{value:"AC",text:"Algoritmo de cálculo"}],dataConsulta:[],headers:[{text:"Título del proceso",align:"left",value:"titulo",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha límite",align:"left",value:"fecha_cierre_format",class:"subtitle-1 font-weight-bold black--text"},{text:"Tipo de proceso",align:"left",value:"tipo_contratacion",class:"subtitle-1 font-weight-bold black--text"},{text:"Estado",align:"left",value:"estado",class:"subtitle-1 font-weight-bold black--text"},{text:"Referencia",align:"left",value:"referencia",class:"subtitle-1 font-weight-bold black--text"},{text:"Oferentes",align:"center",value:"verOferentes",class:"subtitle-1 font-weight-bold black--text"}],headersOferente:[{text:"Nombre/Razón social",align:"left",value:"Nombre",class:"subtitle-1 font-weight-bold black--text"},{text:"Identificación",align:"left",value:"identificacion",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha",align:"left",value:"fecha",class:"subtitle-1 font-weight-bold black--text"}]}},methods:{propuestasCerradas:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].propuestasCerradas();case 3:a=t.sent,r=a.data,e.dataConsulta=r,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()},oferentesPropuestas:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].oferentesPropuestas({codigopropuesta:e});case 3:n=r.sent,s=n.data,a.oferentes=s,a.tituloOferentes=t,a.dialog_oferentes=!0,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0);case 13:return r.prev=13,r.finish(13);case 15:case"end":return r.stop()}}),r,null,[[0,10,13,15]])})))()},adjudicarProceso:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,l,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selProponente.length<=0)){t.next=3;break}return e.$toasted.error("No se ha seleccionado ningún oferente",{icon:"error",duration:5e3}),t.abrupt("return");case 3:return a=e.selProponente[0].consecutivo,r=e.selProponente[0].proponente,n=e.selProponente[0].llave,s=e.selProponente[0].titulopropuesta,t.prev=7,t.next=10,c["a"].adjudicarProceso({proceso:a,contratista:r});case 10:l=t.sent,i=l.data,i.result?"ok"===i.result?(e.$toasted.success(i.mensaje,{icon:"done",duration:5e3}),e.guardarMensaje(n,s),e.propuestasCerradas(),o["EventBus"].$emit("actualizarPropuesta"),e.dialog_oferentes=!1):e.$toasted.error(i.mensaje,{icon:"error",duration:5e3}):e.$toasted.error("Se presentó un error al intentar de realizar él proceso",{icon:"error",duration:5e3}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),console.log(t.t0);case 18:return t.prev=18,t.finish(18);case 20:case"end":return t.stop()}}),t,null,[[7,15,18,20]])})))()},guardarMensaje:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,s,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="Felicitaciones!!. Se le ha adjudicado el proceso '"+t+"'",s=0,r.next=4,c["b"].agregarMensaje({codigoconvreg:e,mensaje:n,padre:s,estado:"E",userid:a.$session.get("usuarioid"),necesitacodpadre:"1"});case 4:o=r.sent,l=o.data,l.respuesta&&console.log(l.respuesta);case 7:case"end":return r.stop()}}),r)})))()}},mounted:function(){this.propuestasCerradas()}},i=l,u=a("2877"),d=Object(u["a"])(i,r,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b2d67.0bb1f471.js.map