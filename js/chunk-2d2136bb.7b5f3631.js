(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2136bb"],{ad35:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{justify:"center"}},[a("v-flex",[a("v-card",{staticClass:"elevation-2"},[a("v-card-title",{staticClass:"headline justify-center blue--text"},[e._v(" "+e._s(e.itemactual.referencia+" - "+e.itemactual.titulo)+" ")]),a("v-card-text",[e.editOk?a("div",{staticStyle:{"padding-bottom":"10px"}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(t){e.dialog_addupd=!0,e.edit=0,e.itemnov=""}}},[a("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1):e._e(),a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("br"),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataNovedades,search:e.search},scopedSlots:e._u([{key:"item.archivo",fn:function(t){var i=t.item;return[""!=i.archivo?a("v-icon",{staticClass:"mr-5",attrs:{color:"primary"},on:{click:function(t){return e.openFile(i.rutasarchivo)}}},[e._v(" insert_drive_file ")]):e._e()]}},{key:"item.accion",fn:function(t){var i=t.item;return[e.editOk?a("v-icon",{staticClass:"mr-5",attrs:{small:"",color:"primary"},on:{click:function(t){e.dialog_addupd=!0,e.edit=1,e.itemnov=i}}},[e._v(" edit ")]):e._e(),e.editOk?a("v-icon",{staticClass:"mr-5",attrs:{small:"",color:"error"},on:{click:function(t){e.dialog_del=!0,e.itemnov=i}}},[e._v(" delete ")]):e._e()]}}])})],1)],1)],1),a("v-dialog",{attrs:{width:"800"},model:{value:e.dialog_addupd,callback:function(t){e.dialog_addupd=t},expression:"dialog_addupd"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline red--text"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"validnov",model:{value:e.validnov,callback:function(t){e.validnov=t},expression:"validnov"}},[a("v-flex",[a("v-text-field",{attrs:{label:"Novedad",rules:[e.rules.required]},model:{value:e.novedad,callback:function(t){e.novedad=t},expression:"novedad"}})],1),a("v-flex",[a("span",[e._v("Soporte")]),a("adjuntarArchivos",{attrs:{item:e.archivo,placeholder:"Soporte",tipoarchivo:".pdf"}}),a("v-icon",{attrs:{color:"primary"},on:{click:function(t){return e.abrirDialogoElimFile(e.archivo.file_name)}}},[e._v(" cancel ")])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_addupd=!1}}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.validnov},on:{click:e.adicionarNovedad}},[e._v("Aceptar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog_del,callback:function(t){e.dialog_del=t},expression:"dialog_del"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline red--text"},[e._v("Eliminar Novedad")])]),a("v-card-text",[e._v(" ¿Esta seguro de eliminar la Novedad seleccionada? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:e.closeDialogoDel}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:e.deleteitem}},[e._v("Eliminar")])],1)],1)],1),a("v-dialog",{attrs:{width:"550"},model:{value:e.dialog_deletefile,callback:function(t){e.dialog_deletefile=t},expression:"dialog_deletefile"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline red--text"},[e._v("Eliminar Archivo")])]),a("v-card-text",[e._v(" ¿Esta seguro de eliminar el Archivo "+e._s(e.filedelete)+" definitivamente?. ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_deletefile=!1}}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:e.eliminarArchivo}},[e._v("Eliminar")])],1)],1)],1)],1)},r=[],o=a("1da1"),n=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("7424")),c={name:"anunciosTabNov",props:["itemactual"],components:{adjuntarArchivos:function(){return a.e("chunk-1055bd0f").then(a.bind(null,"e09e"))}},data:function(){return{search:"",dataNovedades:[],novedad:"",dialog_addupd:!1,formTitle:"",validnov:!1,archivo:{file_name:"",file_path:"",file_name_tmp:""},rutaarchivo:"",dialog_del:!1,itemnov:"",edit:-1,dialog_deletefile:!1,filedelete:"",codigonovedad:"",editOk:0,headers:[{text:"Descripción",align:"left",value:"descripcion",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha",align:"center",value:"fecha",class:"subtitle-1 font-weight-bold black--text"},{text:"Ver Doc.",align:"center",value:"archivo",class:"subtitle-1 font-weight-bold black--text"},{text:"Acción",align:"center",value:"accion",class:"subtitle-1 font-weight-bold black--text"}],rules:{required:function(e){return!!e||"Campo Requerido."}}}},methods:{getNovedades:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["b"].getNovedades({codigoproceso:e.itemactual.id});case 2:a=t.sent,i=a.data,e.dataNovedades=i.data;case 5:case"end":return t.stop()}}),t)})))()},limpiarForm:function(){this.codigonovedad=0,this.novedad="",this.archivo={file_name:"",file_path:"",file_name_tmp:""},this.rutaarchivo=""},openFile:function(e){try{window.open(e,"_blank")}catch(t){this.$toasted.error(t,{icon:"error",duration:5e3})}},closeDialogoDel:function(){this.itemnov="",this.dialog_del=!1},abrirDialogoElimFile:function(e){this.filedelete=e,this.dialog_deletefile=!0},adicionarNovedad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["c"].addUpdNovedad({codigo:e.codigonovedad,codigoproceso:e.itemactual.id,descripcion:e.novedad,archivo:e.archivo});case 2:a=t.sent,i=a.data,i.tipo?"success"===i.tipo?(e.$toasted.success(i.respuesta,{icon:"check",duration:5e3}),e.limpiarForm(),e.edit=-1):e.$toasted.error(i.respuesta,{icon:"error",duration:5e3}):e.$toasted.error("Se presentó un error al intentar agregar o actualizar la información",{icon:"error",duration:5e3}),e.getNovedades(),e.dialog_deletefile=!1;case 7:case"end":return t.stop()}}),t)})))()},eliminarArchivo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="\\novedadesprocesos\\NOV"+e.itemnov.codigo+"\\",t.next=3,n["c"].eliminarArcNovedad({codigo:e.itemnov.codigo,ruta:a,archivo:e.filedelete});case 3:i=t.sent,r=i.data,r.tipo?"success"===r.tipo?(e.$toasted.success(r.respuesta,{icon:"check",duration:5e3}),e.archivo={file_name:"",file_path:"",file_name_tmp:""}):e.$toasted.error(r.respuesta,{icon:"error",duration:5e3}):e.$toasted.error("Se presentó un error al intentar eliminar el archivo",{icon:"error",duration:5e3}),e.getNovedades(),e.dialog_deletefile=!1;case 8:case"end":return t.stop()}}),t)})))()},deleteitem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="\\novedadesprocesos\\NOV"+e.itemnov.codigo+"\\",t.next=3,n["c"].eliminarNovedad({codigo:e.itemnov.codigo,ruta:a,archivo:e.itemnov.archivo});case 3:i=t.sent,r=i.data,r.tipo?"success"===r.tipo?(e.$toasted.success(r.respuesta,{icon:"check",duration:5e3}),e.archivo={file_name:"",file_path:"",file_name_tmp:""}):e.$toasted.error(r.respuesta,{icon:"error",duration:5e3}):e.$toasted.error("Se presentó un error al intentar eliminar el archivo",{icon:"error",duration:5e3}),e.getNovedades(),e.dialog_del=!1;case 8:case"end":return t.stop()}}),t)})))()}},watch:{itemactual:{handler:function(e){e&&(this.editOk=this.$session.get("codigopersonal")===e.ab_asignado,this.getNovedades())},immediate:!0},edit:{handler:function(e){if(console.log("edit "+e),e){this.formTitle="Editar",this.codigonovedad=this.itemnov.codigo,this.novedad=this.itemnov.descripcion;var t=this.itemnov.archivo;this.rutaarchivo=this.itemnov.rutasarchivo,this.archivo={file_name:t,file_path:""!==t?this.rutaarchivo:"",file_name_tmp:""}}else this.formTitle="Nuevo",this.limpiarForm()},immediate:!0}},mounted:function(){this.getNovedades()}},d=c,l=a("2877"),s=Object(l["a"])(d,i,r,!1,null,null,null);t["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d2136bb.7b5f3631.js.map