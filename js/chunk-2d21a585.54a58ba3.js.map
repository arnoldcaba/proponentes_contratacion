{"version":3,"sources":["webpack:///./src/components/adminApp/formulacioncontractual/tabDocPoliza.vue?78f6","webpack:///src/components/adminApp/formulacioncontractual/tabDocPoliza.vue","webpack:///./src/components/adminApp/formulacioncontractual/tabDocPoliza.vue?2f32","webpack:///./src/components/adminApp/formulacioncontractual/tabDocPoliza.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","on","$event","abrirDialogoAddedit","_v","headers","data","scopedSlots","_u","key","fn","ref","item","staticClass","dialog_del","itemactual","model","value","callback","$$v","dialog","expression","_s","formTitle","valid","rules","required","descripcion","cerrarDialogo","saveDocumento","deleteDoc","staticRenderFns","name","props","edit","codigo","tipo","methods","limpiarDatos","abrirDialogoDel","watch","idproceso","traeDocumentos","val","mounted","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,SAAS,CAACA,EAAG,MAAM,CAACE,YAAY,CAAC,iBAAiB,SAAS,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,IAAM,GAAG,KAAO,GAAG,MAAQ,GAAG,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,oBAAoB,EAAG,OAAO,CAACN,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACP,EAAIW,GAAG,UAAU,IAAI,GAAGP,EAAG,eAAe,CAACG,MAAM,CAAC,QAAUP,EAAIY,QAAQ,MAAQZ,EAAIa,KAAK,iBAAiB,EAAE,gBAAe,GAAMC,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,cAAcC,GAAG,SAASC,GACjhB,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACf,EAAG,SAAS,CAACgB,YAAY,OAAOb,MAAM,CAAC,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,oBAAoB,EAAGS,MAAS,CAACnB,EAAIW,GAAG,YAAYP,EAAG,SAAS,CAACgB,YAAY,OAAOb,MAAM,CAAC,MAAQ,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQT,EAAIqB,YAAW,EAAMrB,EAAIsB,WAAWH,KAAQ,CAACnB,EAAIW,GAAG,sBAAsB,GAAGP,EAAG,WAAW,CAACG,MAAM,CAAC,YAAY,SAASgB,MAAM,CAACC,MAAOxB,EAAU,OAAEyB,SAAS,SAAUC,GAAM1B,EAAI2B,OAAOD,GAAKE,WAAW,WAAW,CAACxB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACA,EAAG,OAAO,CAACgB,YAAY,YAAY,CAACpB,EAAIW,GAAGX,EAAI6B,GAAG7B,EAAI8B,gBAAgB1B,EAAG,cAAc,CAACA,EAAG,cAAc,CAACG,MAAM,CAAC,eAAe,KAAK,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,GAAG,OAAS,KAAK,CAACH,EAAG,SAAS,CAACc,IAAI,OAAOK,MAAM,CAACC,MAAOxB,EAAS,MAAEyB,SAAS,SAAUC,GAAM1B,EAAI+B,MAAML,GAAKE,WAAW,UAAU,CAACxB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,cAAc,MAAQ,CAACP,EAAIgC,MAAMC,WAAWV,MAAM,CAACC,MAAOxB,EAAe,YAAEyB,SAAS,SAAUC,GAAM1B,EAAIkC,YAAYR,GAAKE,WAAW,kBAAkB,IAAI,IAAI,IAAI,IAAI,GAAGxB,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,IAAIC,GAAG,CAAC,MAAQR,EAAImC,gBAAgB,CAACnC,EAAIW,GAAG,cAAcP,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,GAAG,UAAYP,EAAI+B,OAAOvB,GAAG,CAAC,MAAQR,EAAIoC,gBAAgB,CAACpC,EAAIW,GAAG,cAAc,IAAI,IAAI,GAAGP,EAAG,WAAW,CAACG,MAAM,CAAC,YAAY,SAASgB,MAAM,CAACC,MAAOxB,EAAc,WAAEyB,SAAS,SAAUC,GAAM1B,EAAIqB,WAAWK,GAAKE,WAAW,eAAe,CAACxB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACA,EAAG,OAAO,CAACgB,YAAY,sBAAsB,CAACpB,EAAIW,GAAG,0BAA0BP,EAAG,cAAc,CAACJ,EAAIW,GAAG,qDAAqDP,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,GAAG,KAAO,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQT,EAAIqB,YAAW,KAAS,CAACrB,EAAIW,GAAG,cAAcP,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQ,MAAM,KAAO,IAAIC,GAAG,CAAC,MAAQR,EAAIqC,YAAY,CAACrC,EAAIW,GAAG,eAAe,IAAI,IAAI,IAAI,IACh1D2B,EAAkB,G,oCC2EtB,GACEC,KAAM,eACNC,MAAO,CAAC,aACR3B,KAHF,WAII,MAAO,CACLA,KAAM,GACNc,QAAQ,EACRN,YAAY,EACZC,WAAY,GACZQ,UAAW,GACXW,MAAO,EACPV,OAAO,EACPW,OAAQ,EACRC,KAAM,KACNT,YAAa,GACbtB,QAAS,CACf,CAAQ,KAAR,YAAQ,MAAR,OAAQ,MAAR,cAAQ,MAAR,2CACA,CAAQ,KAAR,SAAQ,MAAR,SAAQ,UAAR,EAAQ,MAAR,4CAEMoB,MAAO,CACLC,SAAU,SAAlB,qCAIEW,QAAS,CACPC,aADJ,WAEM5C,KAAKyC,OAAS,EACdzC,KAAKiC,YAAc,IAErB,eALJ,WAKA,yLAEA,wFAFA,gBAEA,EAFA,EAEA,KACA,SAHA,mDAKA,kBALA,wGASIxB,oBAdJ,SAcA,KACMT,KAAKwC,KAAOA,EACZxC,KAAKqB,WAAaH,EAClBlB,KAAK0B,QAAS,GAEhBmB,gBAnBJ,SAmBA,GACM7C,KAAKqB,WAAaH,EAClBlB,KAAKoB,YAAa,GAEpB,UAvBJ,WAuBA,yLAEA,4EAFA,gBAEA,EAFA,EAEA,KACA,GACA,mBACA,mFACA,gBACA,iBAEA,uGATA,mDAYA,kBAZA,wGAgBI,cAvCJ,WAuCA,2KACA,IADA,SAGA,WAHA,iCAIA,6CACA,CACA,kCACA,0BACA,cARA,gBAIA,EAJA,EAIA,KAMA,eACA,GACA,IACA,kFACA,gBACA,iBAEA,4FAjBA,2BAoBA,yCApBA,wBAqBA,6EArBA,4CAwBA,gDACA,CACA,gBACA,0BACA,kCACA,cA7BA,iBAwBA,EAxBA,EAwBA,KAOA,GACA,IACA,oFACA,gBACA,gBACA,oBAEA,4FAtCA,QAyCA,IACA,gBACA,UACA,aA5CA,qDA+CA,KACA,eACA,qBACA,8BAGA,SACA,iDAEA,mBACA,gDAzDA,6DA4DIc,cAnGJ,WAoGMlC,KAAKqB,WAAa,GAClBrB,KAAKwC,MAAQ,EACbxC,KAAK0B,QAAS,IAGlBoB,MAAO,CACLC,UAAW,SAAf,GACM/C,KAAKgD,kBAEPR,KAAM,SAAV,GACUS,GACFjD,KAAK6B,UAAY,SACjB7B,KAAKyC,OAASzC,KAAKqB,WAAWoB,OAC9BzC,KAAKiC,YAAcjC,KAAKqB,WAAWY,cAEnCjC,KAAK4C,eACL5C,KAAK6B,UAAY,WAIvBqB,QAhJF,WAiJIlD,KAAKgD,mBC/N2W,I,YCOhXG,EAAY,eACd,EACArD,EACAuC,GACA,EACA,KACA,KACA,MAIa,aAAAc,E","file":"js/chunk-2d21a585.54a58ba3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-flex',[_c('div',{staticStyle:{\"padding-bottom\":\"10px\"}},[_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.abrirDialogoAddedit(0, '')}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"add\")])],1)],1),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.data,\"items-per-page\":5,\"disable-sort\":true},scopedSlots:_vm._u([{key:\"item.action\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-5\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.abrirDialogoAddedit(1, item)}}},[_vm._v(\" edit \")]),_c('v-icon',{staticClass:\"mr-5\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){_vm.dialog_del=true, _vm.itemactual=item}}},[_vm._v(\" delete \")])]}}])})],1),_c('v-dialog',{attrs:{\"max-width\":\"700px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\",\"column\":\"\"}},[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-flex',[_c('v-text-field',{attrs:{\"label\":\"Descripción\",\"rules\":[_vm.rules.required]},model:{value:(_vm.descripcion),callback:function ($$v) {_vm.descripcion=$$v},expression:\"descripcion\"}})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.cerrarDialogo}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":!_vm.valid},on:{\"click\":_vm.saveDocumento}},[_vm._v(\"Guardar\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.dialog_del),callback:function ($$v) {_vm.dialog_del=$$v},expression:\"dialog_del\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline red--text\"},[_vm._v(\"Eliminar Documento\")])]),_c('v-card-text',[_vm._v(\" ¿Esta seguro de eliminar el actual documento? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog_del=false}}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":_vm.deleteDoc}},[_vm._v(\"Eliminar\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n   <v-container>\n      <v-flex>\n        <div style=\"padding-bottom:10px\">\n            <v-btn fab dark small color=\"primary\" @click=\"abrirDialogoAddedit(0, '')\" >\n              <v-icon dark>add</v-icon>\n            </v-btn>\n        </div>\n        <v-data-table :headers=\"headers\"\n            :items=\"data\"\n            :items-per-page=\"5\"\n            :disable-sort=\"true\"\n        >\n            <template v-slot:item.action=\"{ item }\">\n                <v-icon\n                    class=\"mr-5\"\n                    color=\"primary\"\n                    @click=\"abrirDialogoAddedit(1, item)\"\n                >\n                    edit\n                </v-icon>\n                <v-icon\n                    class=\"mr-5\"\n                    color=\"error\"\n                    @click=\"dialog_del=true, itemactual=item\"\n                >\n                    delete\n                </v-icon>\n            </template>\n        </v-data-table>\n      </v-flex>\n      <v-dialog v-model=\"dialog\" max-width=\"700px\">\n        <v-card>\n            <v-card-title>\n              <span class=\"headline\">{{ formTitle }}</span>\n            </v-card-title>\n            <v-card-text>\n                <v-container grid-list-md>\n                    <v-layout wrap column>\n                        <v-form v-model=\"valid\" ref=\"form\">\n                            <v-flex>\n                                <v-text-field v-model=\"descripcion\"\n                                    label=\"Descripción\"\n                                    :rules=\"[rules.required]\"\n                                >\n                                </v-text-field>\n                            </v-flex>\n                        </v-form>\n                    </v-layout>\n                </v-container>\n            </v-card-text>\n            <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"primary\" text @click=\"cerrarDialogo\">Cancelar</v-btn>\n                <v-btn color=\"primary\" text @click=\"saveDocumento\" :disabled=\"!valid\">Guardar</v-btn>\n            </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n      <v-dialog v-model=\"dialog_del\" max-width=\"600px\">\n        <v-card>\n            <v-card-title>\n                <span class=\"headline red--text\">Eliminar Documento</span>\n            </v-card-title>\n            <v-card-text>\n                ¿Esta seguro de eliminar el actual documento?\n            </v-card-text>\n            <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"primary\" dark text @click=\"dialog_del=false\">Cancelar</v-btn>\n                <v-btn color=\"red\" text @click=\"deleteDoc\" >Eliminar</v-btn>\n            </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-container>\n</template>\n<script>\nimport { adminApp } from '@/services/api'\nexport default {\n  name: 'tabdocpoliza',\n  props: ['idproceso'],\n  data () {\n    return {\n      data: [],\n      dialog: false,\n      dialog_del: false,\n      itemactual: '',\n      formTitle: '',\n      edit: -1,\n      valid: false,\n      codigo: 0,\n      tipo: 'TP',\n      descripcion: '',\n      headers: [\n        { text: 'Documento', align: 'left', value: 'descripcion', class: 'subtitle-1 font-weight-bold black--text' },\n        { text: 'Acción', value: 'action', sortable: false, class: 'subtitle-1 font-weight-bold black--text' }\n      ],\n      rules: {\n        required: value => !!value || 'Campo requerido.'\n      }\n    }\n  },\n  methods: {\n    limpiarDatos () {\n      this.codigo = 0\n      this.descripcion = ''\n    },\n    async traeDocumentos () {\n      try {\n        const { data } = await adminApp.PropuestaConvocatoriaDocumentos({ propuestaconvocatoria: this.idproceso, tipo: this.tipo })\n        this.data = data\n      } catch (error) {\n        console.log(error)\n      } finally {\n      }\n    },\n    abrirDialogoAddedit (edit, item) {\n      this.edit = edit\n      this.itemactual = item\n      this.dialog = true\n    },\n    abrirDialogoDel (item) {\n      this.itemactual = item\n      this.dialog_del = true\n    },\n    async deleteDoc () {\n      try {\n        const { data } = await adminApp.eliminarPropuestaConvocatoriaDocumento({ codigo: this.itemactual.codigo })\n        if (data) {\n          this.traeDocumentos()\n          this.$toasted.success('Se eliminó el documento con éxito', { icon: 'done', duration: 5000 })\n          this.itemactual = ''\n          this.dialog_del = false\n        } else {\n          this.$toasted.error('Se presentó un error al intentar eliminar el documento', { icon: 'error', duration: 5000 })\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n      }\n    },\n    async saveDocumento () {\n      let ok = 0\n      try {\n        if (this.edit === 0) {\n          const { data } = await adminApp.agregarPropuestaConvocatoriaDocumento(\n            {\n              propuestaconvocatoria: this.idproceso,\n              descripcion: this.descripcion,\n              tipo: this.tipo\n            })\n          console.log(data)\n          if (data) {\n            ok = 1\n            this.$toasted.success('Se agregó el documento con éxito', { icon: 'done', duration: 5000 })\n            this.itemactual = ''\n            this.dialog_del = false\n          } else {\n            this.$toasted.error('Se presentó un error al realizar el proceso', { icon: 'error', duration: 5000 })\n          }\n        } else {\n          if (this.itemactual.descripcion === this.descripcion) {\n            this.$toasted.error('No hay datos para actualizar', { icon: 'error', duration: 5000 })\n            return\n          }\n          const { data } = await adminApp.actualizarPropuestaConvocatoriaDocumento(\n            {\n              codigo: this.codigo,\n              descripcion: this.descripcion,\n              propuestaconvocatoria: this.idproceso,\n              tipo: this.tipo\n            })\n          if (data) {\n            ok = 1\n            this.$toasted.success('Se modificó el documento con éxito', { icon: 'done', duration: 5000 })\n            this.itemactual = ''\n            this.dialog_del = false\n            this.traeDocumentos()\n          } else {\n            this.$toasted.error('Se presentó un error al realizar el proceso', { icon: 'error', duration: 5000 })\n          }\n        }\n        if (ok) {\n          this.itemactual = ''\n          this.edit = -1\n          this.dialog = false\n        }\n      } catch (error) {\n        let mensajeErr = ''\n        if (error.response) {\n          if (error.response.data) {\n            mensajeErr = error.response.data.message\n          }\n        }\n        if (mensajeErr === '') {\n          mensajeErr = 'Se presentó un error al realizar el proceso'\n        }\n        this.traeDocumentos()\n        this.$toasted.error(mensajeErr, { icon: 'error', duration: 5000 })\n      }\n    },\n    cerrarDialogo () {\n      this.itemactual = ''\n      this.edit = -1\n      this.dialog = false\n    }\n  },\n  watch: {\n    idproceso: function (val) {\n      this.traeDocumentos()\n    },\n    edit: function (val) {\n      if (val) {\n        this.formTitle = 'Editar'\n        this.codigo = this.itemactual.codigo\n        this.descripcion = this.itemactual.descripcion\n      } else {\n        this.limpiarDatos()\n        this.formTitle = 'Nuevo'\n      }\n    }\n  },\n  mounted () {\n    this.traeDocumentos()\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabDocPoliza.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabDocPoliza.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tabDocPoliza.vue?vue&type=template&id=7c746694&\"\nimport script from \"./tabDocPoliza.vue?vue&type=script&lang=js&\"\nexport * from \"./tabDocPoliza.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}