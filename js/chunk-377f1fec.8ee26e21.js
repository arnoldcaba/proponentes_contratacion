(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-377f1fec"],{"0b42":function(e,t,a){var r=a("861d"),n=a("e8b5"),i=a("b622"),o=i("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)?r(t)&&(t=t[o],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"1dde":function(e,t,a){var r=a("d039"),n=a("b622"),i=a("2d00"),o=n("species");e.exports=function(e){return i>=51||!r((function(){var t=[],a=t.constructor={};return a[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"2dfa":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-flex",[e.item.file_path?e._e():a("v-file-input",e._g(e._b({on:{change:function(t){e.handleFileUpload(t)}},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}})),e._l(e.$slots,(function(t,a){return{key:a,fn:function(){return[e._t(a)]},proxy:!0}}))],null,!0)},"v-file-input",Object.assign({},e.$attrs,e.commonAttrs),!1),e.$listeners)),e.item.file_path?a("v-chip",{staticClass:"ma-2",staticStyle:{margin:"5px"},attrs:{close:"",color:"green darken-2","text-color":"white"},on:{click:function(t){return e.openInNewTab(e.item.file_path)},"click:close":e.removeFile}},[e._v(e._s(e.item.file_name.substring(0,50))+" ")]):e._e()],1)],1)},n=[],i=a("1da1"),o=(a("96cf"),a("b0c0"),a("af91")),c=a("7dee"),s={inheritAttrs:!1,props:{item:{default:function(){return{file_name:"",file_path:""}}}},data:function(){return{}},methods:{handleFileUpload:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null===e){a.next=10;break}return a.next=3,o["a"].uploadToStorage(e);case 3:r=a.sent,t.item.file_size=e.size,t.item.file_type=e.type,t.item.file_name=e.name,t.item.file_path=r.data.path,a.next=14;break;case 10:t.item.file_name="",t.item.file_path="",t.item.file_size="",t.item.file_type="";case 14:t.$emit("file-changed",t.item);case 15:case"end":return a.stop()}}),a)})))()},openInNewTab:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getFileFromStorage(e);case 3:a=t.sent,r=a.data,n=Object(c["a"])(r,"image/jpeg",""),i=window.open(n,"_blank"),i.focus(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},removeFile:function(){this.item.file_name="",this.item.file_path="",this.item.file_size="",this.item.file_type="",this.$emit("file-changed",this.item)}},computed:{commonAttrs:function(){return{persistentHint:!0,dense:!0,hideDetails:!1}}}},l=s,u=a("2877"),d=Object(u["a"])(l,r,n,!1,null,"769812f2",null);t["a"]=d.exports},"65f0":function(e,t,a){var r=a("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},b727:function(e,t,a){var r=a("0366"),n=a("44ad"),i=a("7b0b"),o=a("50c4"),c=a("65f0"),s=[].push,l=function(e){var t=1==e,a=2==e,l=3==e,u=4==e,d=6==e,f=7==e,m=5==e||d;return function(p,v,h,_){for(var b,g,x=i(p),w=n(x),k=r(v,h,3),D=o(w.length),y=0,R=_||c,j=t?R(p,D):a||f?R(p,0):void 0;D>y;y++)if((m||y in w)&&(b=w[y],g=k(b,y,x),e))if(t)j[y]=g;else if(g)switch(e){case 3:return!0;case 5:return b;case 6:return y;case 2:s.call(j,b)}else switch(e){case 4:return!1;case 7:s.call(j,b)}return d?-1:l||u?u:j}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},f037:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{justify:"center"}},[a("v-flex",[a("v-card",{staticClass:"mx-auto elevation-2"},[a("v-card-text",[a("span",{staticClass:"headline justify-center black--text font-weight-bold"},[e._v(" Información General "),e.editOk?a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:e.abrirEdicionRef}},[a("v-icon",[e._v("edit")])],1):e._e()],1),a("br"),a("span",{staticClass:"subheading font-weight-bold"},[a("v-list",{attrs:{dense:""}},[a("v-list-item",[a("v-list-item-content",[e._v("Fecha Límite de Entrega:")]),a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(e.itemactual.fecha_cierre_format)+" ")])],1),a("v-list-item",[a("v-list-item-content",[e._v("Tiempo Faltante:")]),a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(e.tiempoTrascurrido.days+" Dias, "+e.tiempoTrascurrido.hours+" Horas, "+e.tiempoTrascurrido.minutes+" Minutos, "+e.tiempoTrascurrido.seconds+" Segundos")+" ")])],1),a("v-list-item",[a("v-list-item-content",[e._v("Estado:")]),a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(e.itemactual.estado)+" ")])],1)],1)],1),a("span",{staticClass:"headline justify-center black--text font-weight-bold"},[e._v(" Documentos Generales ")]),a("br"),e.editOk?a("div",{staticStyle:{"padding-bottom":"10px"}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.limpiarArchivosAdd}},[a("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1):e._e(),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.arrDocs},scopedSlots:e._u([{key:"item.descargar",fn:function(t){var r=t.item;return[""!=r.file_name&&""!=r.file_path?a("v-icon",{staticClass:"mr-5",attrs:{color:"primary"},on:{click:function(t){return e.downloadFile(r.file_path,r.file_name)}}},[e._v(" archive ")]):e._e()]}}])})],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600",scrollable:""},model:{value:e.dialog_editar,callback:function(t){e.dialog_editar=t},expression:"dialog_editar"}},[a("v-card",{attrs:{elevation:"10"}},[a("v-card-title",{staticClass:"headline justify-center blue--text"},[e._v(" Editar ")]),a("v-card-text",[a("editRef",{attrs:{fecha_cierre:e.itemactual.fecha_cierre,estado:e.itemactual.estado},on:{"update:fecha_cierre":function(t){return e.$set(e.itemactual,"fecha_cierre",t)},"update:estado":function(t){return e.$set(e.itemactual,"estado",t)},actualizaDatos:e.actualizarDatos}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_editar=!1}}},[e._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"600",scrollable:""},model:{value:e.dialog_subiradjgeneral,callback:function(t){e.dialog_subiradjgeneral=t},expression:"dialog_subiradjgeneral"}},[a("v-card",{attrs:{elevation:"10"}},[a("v-card-title",{staticClass:"headline justify-center blue--text"},[e._v(" Agregar Documento General ")]),a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Documento"},model:{value:e.nombreDocumento,callback:function(t){e.nombreDocumento=t},expression:"nombreDocumento"}})],1)],1),a("v-row",[a("v-col",[a("AddFilesToStorage",{key:e.fileReset,attrs:{item:e.arcDocumento,placeholder:"Cargar Archivo",dense:"","hide-details":"","prepend-icon":""},on:{"remove-file":function(t){e.fileReset++},"file-changed":function(t){e.fileReset++}}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:e.guardarDocGeneral}},[e._v("Guardar")]),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_subiradjgeneral=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},n=[],i=a("1da1"),o=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("ac1f"),a("1276"),a("25f0"),a("7424")),c=a("2dfa"),s=a("bc3a"),l=a.n(s),u={name:"anunciosTabRef",props:["itemactual"],components:{editRef:function(){return a.e("chunk-2d2163d6").then(a.bind(null,"c22c"))},AddFilesToStorage:c["a"]},data:function(){return{tiempoTrascurrido:[],dialog_editar:!1,dialog_subiradjgeneral:!1,fileReset:0,nombreDocumento:"",arcDocumento:[],editOk:0,arrDocs:[{id:1,doc:"Términos de Referencia"},{id:2,doc:"Anexo Persona Natural"},{id:3,doc:"Formato de oferta económica"},{id:4,doc:"Información financiera, estados financieros"},{id:5,doc:"Anexo Fraude y Anticorrupción"}],headers:[{text:"Documento",value:"descripcion",class:"subtitle-1 font-weight-bold black--text"},{text:"Descargar Doc.",value:"descargar",align:"center",class:"subtitle-1 font-weight-bold black--text"}]}},methods:{getTimeRemaining:function(e){var t=Date.parse(e)-Date.parse(new Date),a=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),n=Math.floor(t/36e5%24),i=Math.floor(t/864e5);this.tiempoTrascurrido={total:t,days:i,hours:n,minutes:r,seconds:a}},buscarDocsTermRef:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["b"].traerDocumentosGenerales({id_termref:e.itemactual.id_termref});case 2:a=t.sent,r=a.data,e.arrDocs=r.termref_adjuntos;case 5:case"end":return t.stop()}}),t)})))()},limpiarArchivosAdd:function(){this.nombreDocumento="",this.arcDocumento=[],this.dialog_subiradjgeneral=!0},downloadFile:function(e,t){var a=this;l()({method:"get",url:e,responseType:"arraybuffer"}).then((function(e){a.forceFileDownload(e,t)})).catch((function(){return console.log("error occured")}))},forceFileDownload:function(e,t){var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",t),document.body.appendChild(r),r.click()},abrirEdicionRef:function(){this.dialog_editar=!0},actualizarDatos:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,c,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o["a"].actualizapropuestaConvocatoria({idpropuestaconvocatoria:t.itemactual.id,fecha_cierre:e.fecha_cierre,estado:e.estado});case 2:r=a.sent,n=r.data,n.respuesta?(i=e.fecha_cierre.split("-"),c=i[2].toString(),c=c.length>2?i[2].toString().substring(0,2):i[2].toString(),s=c+"/"+i[1].toString()+"/"+i[0].toString(),t.$toasted.success("Se actualizarón los datos con éxito",{icon:"done",duration:5e3}),t.itemactual.fecha_cierre=e.fecha_cierre,t.itemactual.fecha_cierre_format=s,t.itemactual.estado=e.estado,t.dialog_editar=!1):t.$toasted.error("Se presentó error al intentar de actualizar los datos",{icon:"error",duration:5e3});case 5:case"end":return a.stop()}}),a)})))()},guardarDocGeneral:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={doc_solicitado:e.nombreDocumento,file_name:e.arcDocumento.file_name,file_path:e.arcDocumento.file_path,file_size:e.arcDocumento.file_size,file_type:e.arcDocumento.file_type},t.next=3,o["a"].adicionarDocumentosGenerales({id_termref:e.itemactual.id_termref,data:a});case 3:r=t.sent,n=r.data,n.respuesta?(e.buscarDocsTermRef(),e.$toasted.success("Se agregó el Adjunto con éxito",{icon:"done",duration:5e3}),e.dialog_subiradjgeneral=!1):e.$toasted.error("Se presentó error al intentar de actualizar los datos",{icon:"error",duration:5e3});case 6:case"end":return t.stop()}}),t)})))()}},watch:{itemactual:{handler:function(e){e&&(this.editOk=this.$session.get("codigopersonal")===e.ab_asignado,this.getTimeRemaining(this.itemactual.fecha_cierre),this.buscarDocsTermRef())},immediate:!0}},mounted:function(){var e=this;this.interval=setInterval((function(){e.getTimeRemaining(e.itemactual.fecha_cierre)}),1e3),this.buscarDocsTermRef()}},d=u,f=a("2877"),m=Object(f["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-377f1fec.8ee26e21.js.map