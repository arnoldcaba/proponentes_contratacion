(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-918df37a"],{"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7");function a(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(u){return void r(u)}i.done?t(c):Promise.resolve(c).then(a,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){a(s,n,o,i,c,"next",e)}function c(e){a(s,n,o,i,c,"throw",e)}i(void 0)}))}}},"268e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{justify:"center"}},[r("v-flex",[r("v-card",{staticClass:"mx-auto"},[r("v-card-title",{staticClass:"justify-center"},[e._v("Formulación contractual preliminar")]),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("br"),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dataConsulta,search:e.search},scopedSlots:e._u([{key:"item.verOferentes",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-5",attrs:{color:"primary"},on:{click:function(t){return e.oferentesPropuestas(a.id,a.titulo)}}},[e._v(" person ")])]}}])})],1)],1)],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"1200",scrollable:""},model:{value:e.dialog_oferentes,callback:function(t){e.dialog_oferentes=t},expression:"dialog_oferentes"}},[r("v-card",{attrs:{elevation:"10"}},[r("v-card-title",{staticClass:"headline justify-center"},[e._v(" "+e._s("Adjudicación para el proceso '"+e.tituloOferentes+"'")+" ")]),r("v-card-text",[r("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.searchOferente,callback:function(t){e.searchOferente=t},expression:"searchOferente"}}),r("br"),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersOferente,items:e.oferentes,search:e.searchOferente,"single-select":!0,"show-select":"","item-key":"proponente"},model:{value:e.selProponente,callback:function(t){e.selProponente=t},expression:"selProponente"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",dark:"",text:"",disabled:e.selProponente.length<=0},on:{click:e.adjudicarProceso}},[e._v("Adjudicar")]),r("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_oferentes=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},n=[],o=r("1da1"),s=(r("96cf"),r("56d7")),i=r("7424"),c={name:"formulacionContractualPre",data:function(){return{search:"",tipo_evaluacion:"",oferentes:[],dialog_oferentes:!1,searchOferente:"",tituloOferentes:"",selProponente:[],arrTipoEvaluacion:[{value:"PM",text:"Proceso Manual"},{value:"AC",text:"Algoritmo de cálculo"}],dataConsulta:[],headers:[{text:"Título del proceso",align:"left",value:"titulo",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha límite",align:"left",value:"fecha_cierre_format",class:"subtitle-1 font-weight-bold black--text"},{text:"Tipo de proceso",align:"left",value:"tipo_contratacion",class:"subtitle-1 font-weight-bold black--text"},{text:"Estado",align:"left",value:"estado",class:"subtitle-1 font-weight-bold black--text"},{text:"Referencia",align:"left",value:"referencia",class:"subtitle-1 font-weight-bold black--text"},{text:"Oferentes",align:"center",value:"verOferentes",class:"subtitle-1 font-weight-bold black--text"}],headersOferente:[{text:"Nombre/Razón social",align:"left",value:"Nombre",class:"subtitle-1 font-weight-bold black--text"},{text:"Identificación",align:"left",value:"identificacion",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha",align:"left",value:"fecha",class:"subtitle-1 font-weight-bold black--text"}]}},methods:{propuestasCerradas:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].propuestasCerradas();case 3:r=t.sent,a=r.data,e.dataConsulta=a,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()},oferentesPropuestas:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i["a"].oferentesPropuestas({codigopropuesta:e});case 3:n=a.sent,o=n.data,r.oferentes=o,r.tituloOferentes=t,r.dialog_oferentes=!0,a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:return a.prev=13,a.finish(13);case 15:case"end":return a.stop()}}),a,null,[[0,10,13,15]])})))()},adjudicarProceso:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selProponente.length<=0)){t.next=3;break}return e.$toasted.error("No se ha seleccionado ningún oferente",{icon:"error",duration:5e3}),t.abrupt("return");case 3:return r=e.selProponente[0].consecutivo,a=e.selProponente[0].proponente,n=e.selProponente[0].llave,o=e.selProponente[0].titulopropuesta,t.prev=7,t.next=10,i["a"].adjudicarProceso({proceso:r,contratista:a});case 10:c=t.sent,u=c.data,u.result?"ok"===u.result?(e.$toasted.success(u.mensaje,{icon:"done",duration:5e3}),e.guardarMensaje(n,o),e.propuestasCerradas(),s["EventBus"].$emit("actualizarPropuesta"),e.dialog_oferentes=!1):e.$toasted.error(u.mensaje,{icon:"error",duration:5e3}):e.$toasted.error("Se presentó un error al intentar de realizar él proceso",{icon:"error",duration:5e3}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),console.log(t.t0);case 18:return t.prev=18,t.finish(18);case 20:case"end":return t.stop()}}),t,null,[[7,15,18,20]])})))()},guardarMensaje:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="Felicitaciones!!. Se le ha adjudicado el proceso '"+t+"'",o=0,a.next=4,i["b"].agregarMensaje({codigoconvreg:e,mensaje:n,padre:o,estado:"E",userid:r.$session.get("usuarioid"),necesitacodpadre:"1"});case 4:s=a.sent,c=s.data,c.respuesta&&console.log(c.respuesta);case 7:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.propuestasCerradas()}},u=c,l=r("2877"),d=Object(l["a"])(u,a,n,!1,null,null,null);t["default"]=d.exports},7424:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return c}));var a=r("bc3a"),n=r.n(a),o={getTiposEmpresa:function(e){return n.a.post("getTiposEmpresa",e)},getPrefijosTelefonos:function(e){return n.a.post("getPrefijosTelefonos",e)},getPaises:function(e){return n.a.post("Paises")},getCiudades:function(e){return n.a.post("Ciudades")},getDataRegistro:function(e){return n.a.post("getFormularioRegistro",e)},getUnspscXFiltro:function(e){return n.a.post("UnspscXFiltro",e)},getRegistroUnspsc:function(e){return n.a.post("getRegistroUnspsc",e)},saveRegistroNatural:function(e){return n.a.post("guardarDataFormRegistroNatural",e)},saveRegistroJuridica:function(e){return n.a.post("guardarDataFormRegistroJuridica",e)},delRegistroUnspsc:function(e){return n.a.post("delRegistroUnspsc",e)},saveRegistroUnspsc:function(e){return n.a.post("addRegistroUnspsc",e)},actualizaTCRegistro:function(e){return n.a.post("actualizaTCRegistro",e)}},s={getTipoContratacion:n.a.post("getTipoContratacioEnum"),getEstadoPropuesta:n.a.post("getEstadosPropuestasEnum"),buscarPropuesta:function(e){return n.a.post("buscarPropuesta",e)},expresarInteres:function(e){return n.a.post("expresarInteres",e)},getMsgConvocatoriaRegistro:function(e){return n.a.post("getMsgConvocatoriaRegistro",e)},getMsgHijos:function(e){return n.a.post("getMsgHijos",e)},actualizaMsgleidos:function(e){return n.a.post("actualizarMsgleidos",e)},agregarMensaje:function(e){return n.a.post("nuevoMensaje",e)},getNovedades:function(e){return n.a.post("novedadesProceso",e)},buscarDocumentosTermRef:function(e){return n.a.post("buscarDocumentosTermRef",e)},buscarIdProponenteTermRefAdj:function(e){return n.a.post("buscarIdProponenteTermRefAdj",e)},guardardatosAdjuntosPropTermRef:function(e){return n.a.post("guardardatosAdjuntosPropTermRef",e)},traerDocumentosGenerales:function(e){return n.a.post("traerDocumentosGenerales",e)},postularse:function(e){return n.a.post("postularse",e)}},i={login:function(e){return n.a.post("loginxArea",e)},actualizapropuestaConvocatoria:function(e){return n.a.post("actualizapropuestaConvocatoria",e)},adicionarDocumentosGenerales:function(e){return n.a.post("adicionarDocumentosGenerales",e)},propuestasCerradas:function(e){return n.a.post("propuestasCerradas")},oferentesPropuestas:function(e){return n.a.post("oferentesPropuestas",e)},adjudicarProceso:function(e){return n.a.post("adjudicarProceso",e)},propuestasAdjudicadas:function(e){return n.a.post("propuestasAdjudicadas")},oferentePropuestaAdjudicada:function(e){return n.a.post("oferentePropuestaAdjudicada",e)}},c={addUpdNovedad:function(e){return n.a.post("AddUdpNovedadproceso",e)},eliminarNovedad:function(e){return n.a.post("eliminarNovedad",e)},eliminarArcNovedad:function(e){return n.a.post("eliminarArcNovedadproceso",e)}}}}]);
//# sourceMappingURL=chunk-918df37a.ce2016d6.js.map